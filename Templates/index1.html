<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .info-container {
            border: 1px solid #000;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .left-section, .right-section {
            display: flex;
            align-items: center;
        }
        .left-section img, .right-section img {
            width: 180px;
            margin-right: 10px;
        }
        .info-table {
            margin: 0;
        }
        .info-table td {
            padding: 3px 10px;
        }
        .info-table td:first-child {
            font-weight: bold;
        }

        .left-section {
    display: flex;
    align-items: center;
}

.logo,
.info-table {
    border: 1px solid black; 
    border: 1px solid black; 
    padding: 10px; /
}

.logo {
    margin-right: 10px; 
}
    </style>  
        <style>
            .info-container1 {
                border: 1px solid #000;
                padding: 10px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .info-box1 {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 15px;
                color: white;
                font-weight: bold;
                margin: 5px;
                width: 187px;
            }
            .ok-box1 {
                background-color: green;
            }
            .nok-box1 {
                background-color: red;
            }
            .takt-time1 {
                background-color: lightgray;
                color: black;
                padding: 10px;
                font-weight: bold;
            }
            .progress-container1 {
                width: 100%;
                margin-left: 10px;
            }
           
        </style>  
        <style>
            .chart-container {
    display: table;
    width: 100%;
    border-collapse: collapse;
}

.chart {
    display: table-cell;
    border: 1px solid #000;
    padding: 5px;
    text-align: center;
}

.table-like canvas {
    display: block; 
    max-width: 100%; 
}

        </style>

<style>
    body {
        font-family: Arial, sans-serif;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
    }
    th {
        background-color: #d32f2f;
        color: white;
        text-align: left;
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:hover {
        background-color: #ddd;
    }
    td {
        background-color: #e0e0e0;
    }
    


</style>
</head>
<body><br><br>
    <div class="container mt-5">
     
        <div class="info-container">
            <div class="left-section">
                <img src="assets/download-removebg-preview.png" alt="TVS Logo" class="logo">
    
                <table class="info-table">
                    <tr>
                        <td>STATION NO:</td>
                        <td>
                          <select id="station-select" style="background-color: whitesmoke;">
                            <option value="OP10">OP10</option>
                
                          </select>
                        </td>
                        
                    </tr>
                    <tr>
                        <td>STATION NAME:</td>
                        <td>{{station_name}}</td>
                    </tr>
                    <tr>
                        <td>EMPLOYEE NO:</td>
                        <td>{{emp_number}}</td>
                    </tr>
                    <tr>
                        <td>EMPLOYEE NAME:</td>
                        <td>{{emp_name}}</td>
                    </tr>
                </table>
            </div>
            <div class="right-section">
                <table class="info-table">
                    <tr>
                        <td>Model:</td>
                        <td>{{variant}}</td>
                    </tr>
                    <tr>
                        <td>Serial No:</td>
                        <td>{{serial_number}}</td>
                    </tr>
                    <tr>
                        <td>Shift:</td>
                        <td>{{shift}}</td>
                    </tr>
                    <tr>
                        <td>Timestamp:</td>
                        <td>10/07/2024 12:37</td>
                    </tr>
                </table>
                <img src="assets/down1-removebg-preview.png" alt="Teal Logo" class="logo" style="margin-left: 10px;">
            </div>
        </div>
            <div class="info-container1">
                <div class="info-box1 ok-box1">
                    <span>OK Parts</span>
                    <span class="ml-2" id="ok-parts">{{ok_parts}}</span>
                </div>
                <div class="info-box1 nok-box1">
                    <span>NOK Parts</span>
                    <span class="ml-2" id="nok-parts">{{nok_parts}}</span>
                </div>
                <div class="takt-time1">
                    <span>TAKT TIME (s)</span>
                    <span class="ml-2" id="takt-time1">{{tack_time}}</span>
                </div>
                <div class="progress-container1" >
                    <div class="progress-bar-container1">
                        <div class="progress w-70" style="height: 1.75rem;">
                            
                            <div class="progress-bar bg-success" id="myBar" role="progressbar" style="width: 50%"></div>
                            
                            <!--div class="progress-bar bg-warning" id="progress-bar-yellow" role="progressbar" style="width: 10%"--><!--/div-->
                           
                            <!--div class="progress-bar bg-danger" id="progress-bar-red" role="progressbar" style="width: 10%"--><!--/div-->
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-2">
                        <span>0 %</span>
                        <span>100 %</span>
                        <span>120 %</span>
                        <span>>150 %</span>
                    </div>
                </div>
            </div>
            <div class="chart-container" style="border: 1px solid black; height: 300px;">
                <div class="chart table-like" style="border: 1px solid black; padding: 10px;">
                    <canvas id="shift1Chart"></canvas>
                </div>
                <div class="chart table-like" style="border: 1px solid black; padding: 10px;">
                    <canvas id="shift2Chart"></canvas>
                </div>
                <div class="chart table-like" style="border: 1px solid black; padding: 10px;">
                    <canvas id="shift3Chart"></canvas>
                </div>
            </div>
            
            
            <table style="border: 1px solid black; border-collapse: collapse; width: 100%; margin-top: -1px;">
                <tr>
                    <th style="border: 1px solid black; padding: 8px;">Start Time</th>
                    <th style="border: 1px solid black; padding: 8px;">Active Alarms</th>
                </tr>
                <tr>
                    <td style="border: 1px solid black; padding: 8px;">10/07/2024 12:30:00.000</td>
                    <td style="border: 1px solid black; padding: 8px;">Scanner node failed error</td>
                </tr>
                <tr>
                    <td style="border: 1px solid black; padding: 8px;">10/07/2024 12:31:00.000</td>
                    <td style="border: 1px solid black; padding: 8px;">Emergency pressed in station</td>
                </tr>
                <tr>
                    <td style="border: 1px solid black; padding: 8px;">10/07/2024 12:35:00.000</td>
                    <td style="border: 1px solid black; padding: 8px;">Home position signal lost in station</td>
                </tr>
            </table>
            
</body>
<script>
    
    document.getElementById('ok-paarts').innerText = '29';
    document.getElementById('nok-parts').innerText = '5';
    document.getElementById('takt-time').innerText = '255';

  
    document.getElementById('progress-bar-green').style.width = '80%';
    document.getElementById('progress-bar-yellow').style.width = '10%';
    document.getElementById('progress-bar-red').style.width = '10%';
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        var shift1Data = [30, 50, 40, 70, 25];
        var shift2Data = [45, 25, 55, 30, 40];
        var shift3Data = [20, 35, 45, 60, 30];

  
        var ctx1 = document.getElementById('shift1Chart').getContext('2d');
        var ctx2 = document.getElementById('shift2Chart').getContext('2d');
        var ctx3 = document.getElementById('shift3Chart').getContext('2d');

        var shift1Chart = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: ['Label 1', 'Label 2', 'Label 3', 'Label 4', 'Label 5'],
                datasets: [{
                    label: 'Shift 1',
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1,
                    data: shift1Data
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        var shift2Chart = new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: ['Label 1', 'Label 2', 'Label 3', 'Label 4', 'Label 5'],
                datasets: [{
                    label: 'Shift 2',
                    backgroundColor: 'rgba(255, 99, 132, 0.5)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1,
                    data: shift2Data
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        var shift3Chart = new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: ['Label 1', 'Label 2', 'Label 3', 'Label 4', 'Label 5'],
                datasets: [{
                    label: 'Shift 3',
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1,
                    data: shift3Data
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script>

function backend_call(){

const path = window.location.pathname;
const segments = path.split('/');
const lastSegment = segments[segments.length - 1];
const lastSegmentTrimmed = lastSegment || segments[segments.length - 2];


 var url = 'http://127.0.0.1:8000/dashboard/ajax/'+lastSegmentTrimmed;

fetch(url)
        .then(response => response.json())
        .then(data => {
           console.log(data.ok_parts);
           document.getElementById('ok-parts').innerText = data.ok_parts;
           document.getElementById('nok-parts').innerText = data.nok_parts;
           document.getElementById('takt-time1').innerText = data.tack_time;
           //document.getElementById('ok-parts').innerText = data.cycletime;
           //document.getElementById('ok-parts').innerText = data.emp_name;
           //document.getElementById('ok-parts').innerText = data.emp_code;
           //document.getElementById('ok-parts').innerText = data.model;
           //document.getElementById('ok-parts').innerText = data.sr_no;
           //document.getElementById('ok-parts').innerText = data.shift;
        });

}
 window.onload = function() {
            setInterval(backend_call, 2000); // 2000 milliseconds = 2 seconds
        };
</script>

</html>